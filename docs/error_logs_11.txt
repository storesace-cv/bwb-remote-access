curl 'https://kqwaibgvmzcqeoctukoy.supabase.co/functions/v1/register-device' \
-X 'POST' \
-H 'Content-Type: application/json' \
-H 'Pragma: no-cache' \
-H 'Accept: */*' \
-H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6InVBSHYvMUtaaUpzQTVIeE8iLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2txd2FpYmd2bXpjcWVvY3R1a295LnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiJmNTM4NDI4OC04MzdlLTQxZmMtYWEwOC0wMDIwYzFiYWZkZWMiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzY1NzU0MzY2LCJpYXQiOjE3NjU3NTA3NjYsImVtYWlsIjoiam9yZ2UucGVpeGluaG9AYndiLnB0IiwicGhvbmUiOiIiLCJhcHBfbWV0YWRhdGEiOnsicHJvdmlkZXIiOiJlbWFpbCIsInByb3ZpZGVycyI6WyJlbWFpbCJdfSwidXNlcl9tZXRhZGF0YSI6eyJlbWFpbF92ZXJpZmllZCI6dHJ1ZX0sInJvbGUiOiJhdXRoZW50aWNhdGVkIiwiYWFsIjoiYWFsMSIsImFtciI6W3sibWV0aG9kIjoicGFzc3dvcmQiLCJ0aW1lc3RhbXAiOjE3NjU3NTA3NjZ9XSwic2Vzc2lvbl9pZCI6IjBjOGVmNWNmLTBmNjgtNGM0OS1hOTUwLWZkYzA1N2YxOTFhNSIsImlzX2Fub255bW91cyI6ZmFsc2V9.h9EWMVczXQuMhoaO2-rU9LoPhd2w0y63NyBUD_0Voug' \
-H 'Sec-Fetch-Site: cross-site' \
-H 'Accept-Language: en-GB,en;q=0.9' \
-H 'Cache-Control: no-cache' \
-H 'Sec-Fetch-Mode: cors' \
-H 'Accept-Encoding: gzip, deflate, br' \
-H 'Origin: https://rustdesk.bwb.pt' \
-H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.1 Safari/605.1.15' \
-H 'Referer: https://rustdesk.bwb.pt/' \
-H 'Content-Length: 140' \
-H 'Sec-Fetch-Dest: empty' \
-H 'Priority: u=3, i' \
-H 'apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtxd2FpYmd2bXpjcWVvY3R1a295Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MjQxOTMsImV4cCI6MjA4MDEwMDE5M30.8C3b_iSn4EXKSkmef40XzF7Y4Uqy7i-OLfXNsRiGC3s' \
--data-raw $'{"device_id":"1886522715","friendly_name":"One Plus","notes":"Pessoal | Caso | Telem\xf3vel de testes...","rustdesk_password":"Quer1asEntrar"}'

________________________________________

POST /functions/v1/register-device H3
Content-Type: application/json
Pragma: no-cache
Accept: */*
Authorization: Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6InVBSHYvMUtaaUpzQTVIeE8iLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2txd2FpYmd2bXpjcWVvY3R1a295LnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiJmNTM4NDI4OC04MzdlLTQxZmMtYWEwOC0wMDIwYzFiYWZkZWMiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzY1NzU0MzY2LCJpYXQiOjE3NjU3NTA3NjYsImVtYWlsIjoiam9yZ2UucGVpeGluaG9AYndiLnB0IiwicGhvbmUiOiIiLCJhcHBfbWV0YWRhdGEiOnsicHJvdmlkZXIiOiJlbWFpbCIsInByb3ZpZGVycyI6WyJlbWFpbCJdfSwidXNlcl9tZXRhZGF0YSI6eyJlbWFpbF92ZXJpZmllZCI6dHJ1ZX0sInJvbGUiOiJhdXRoZW50aWNhdGVkIiwiYWFsIjoiYWFsMSIsImFtciI6W3sibWV0aG9kIjoicGFzc3dvcmQiLCJ0aW1lc3RhbXAiOjE3NjU3NTA3NjZ9XSwic2Vzc2lvbl9pZCI6IjBjOGVmNWNmLTBmNjgtNGM0OS1hOTUwLWZkYzA1N2YxOTFhNSIsImlzX2Fub255bW91cyI6ZmFsc2V9.h9EWMVczXQuMhoaO2-rU9LoPhd2w0y63NyBUD_0Voug
Sec-Fetch-Site: cross-site
Accept-Language: en-GB,en;q=0.9
Cache-Control: no-cache
Sec-Fetch-Mode: cors
Accept-Encoding: gzip, deflate, br
Origin: https://rustdesk.bwb.pt
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/26.1 Safari/605.1.15
Referer: https://rustdesk.bwb.pt/
Content-Length: 140
Sec-Fetch-Dest: empty
Priority: u=3, i
apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtxd2FpYmd2bXpjcWVvY3R1a295Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MjQxOTMsImV4cCI6MjA4MDEwMDE5M30.8C3b_iSn4EXKSkmef40XzF7Y4Uqy7i-OLfXNsRiGC3s

----------------------------------------------

H3 200 
Content-Type: application/json
Server-Timing: cfExtPri
Content-Encoding: gzip
Set-Cookie: __cf_bm=mLedCAD.jbZpDAikSmJkJlzoN0fSyAekJMRLI2ajuVQ-1765750786-1.0.1.1-qKLhknEzZSEtV9EiQUBQdppSGf6pYDrFJVi6_I1uy4eB_JV4XOPi4ZI.0YpAB6gLluzgyYU7Q6nWajNzTrion8UTY92xmYJLvISmDhoXclNCBKqhZEnKpkG68Fs4Ogve; path=/; expires=Sun, 14-Dec-25 22:49:46 GMT; domain=.supabase.co; HttpOnly; Secure; SameSite=None
Date: Sun, 14 Dec 2025 22:19:46 GMT
Content-Length: 353
Vary: Accept-Encoding
sb-request-id: 019b1ef2-c51b-7840-8be1-b7000728fd5a
Alt-Svc: h3=":443"; ma=86400
Server: cloudflare
x-deno-execution-id: c3d93454-0262-4594-aa99-1513c3c97687
Priority: u=3,i
cf-cache-status: DYNAMIC
x-sb-edge-region: eu-west-3
Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
sb-project-ref: kqwaibgvmzcqeoctukoy
cf-ray: 9ae115a81adfeeea-LIS
x-served-by: supabase-edge-runtime


-----------------------------------------------------

[
  {
    "event_message": "shutdown",
    "event_type": "Shutdown",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "18131928-e659-4cb5-983b-8ceafb6dcaf9",
    "level": "log",
    "timestamp": 1765750861403000
  },
  {
    "event_message": "[register-device] Upserting device: 1886522715, owner: 8b8e8008-c637-4369-bde7-09becfb06a17\n",
    "event_type": "Log",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "e4f9d434-f448-410f-b289-f38c239ee417",
    "level": "info",
    "timestamp": 1765750786631000
  },
  {
    "event_message": "[register-device] Device registered to auth_user_id=codebase-check-21, mesh_user_id=codebase-check-21\n",
    "event_type": "Log",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "fcce4b6f-1741-4b0d-a20a-32efad212b42",
    "level": "info",
    "timestamp": 1765750786581000
  },
  {
    "event_message": "[register-device] User JWT detected, validating...\n",
    "event_type": "Log",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "d88cc045-640b-4315-99f8-1df1eca37828",
    "level": "info",
    "timestamp": 1765750786391000
  },
  {
    "event_message": "Listening on http://localhost:9999/\n",
    "event_type": "Log",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "3e1e0eb6-ed0b-4cee-8b84-01f1feda2117",
    "level": "info",
    "timestamp": 1765750786388000
  },
  {
    "event_message": "booted (time: 29ms)",
    "event_type": "Boot",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "9c06ceb6-2fd3-4a82-a8f1-9e636fa897bc",
    "level": "log",
    "timestamp": 1765750786384000
  },
  {
    "event_message": "shutdown",
    "event_type": "Shutdown",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "5146ef1f-06bc-4336-b1b0-cdfe7ed372b0",
    "level": "log",
    "timestamp": 1765749273639000
  },
  {
    "event_message": "[register-device] Upserting device: 1886522715, owner: 8b8e8008-c637-4369-bde7-09becfb06a17\n",
    "event_type": "Log",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "2597416a-6a16-4a24-9418-e198e8571891",
    "level": "info",
    "timestamp": 1765749198851000
  },
  {
    "event_message": "[register-device] Device registered to auth_user_id=codebase-check-21, mesh_user_id=codebase-check-21\n",
    "event_type": "Log",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "739c33ca-2859-4f55-9a9b-27e37d3c167c",
    "level": "info",
    "timestamp": 1765749198792000
  },
  {
    "event_message": "[register-device] User JWT detected, validating...\n",
    "event_type": "Log",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "6a8b26f3-d9cd-43f0-a62e-ed64bc8d314e",
    "level": "info",
    "timestamp": 1765749198627000
  },
  {
    "event_message": "Listening on http://localhost:9999/\n",
    "event_type": "Log",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "6d40670f-4a3a-4fd9-8684-748524207f4d",
    "level": "info",
    "timestamp": 1765749198624000
  },
  {
    "event_message": "booted (time: 22ms)",
    "event_type": "Boot",
    "function_id": "0e7e8735-a14c-490b-ab2b-f95899b49990",
    "id": "5028cffe-3a63-4f5e-8738-87f735c4c9e4",
    "level": "log",
    "timestamp": 1765749198623000
  }
]
